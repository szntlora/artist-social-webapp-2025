<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MuseXion - Home</title>
  <link href="https://fonts.googleapis.com/css2?family=Lora&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  {% load static %}
  <link rel="stylesheet" href="{% static 'css/settings.css' %}">
  <link rel="stylesheet" href="{% static 'css/home_page.css' %}">
  <link rel="stylesheet" href="{% static 'css/theme.css' %}">
  <link rel="icon" type="image/png" href="{% static 'images/pillango1.png' %}">
</head>

<body>
<!-- üîπ NAVBAR -->
<div class="navbar">
  <div class="nav-left">
    <button class="icon-btn" id="settingsBtn" title="Settings">
      <img src="{% static 'images/settings.png' %}" alt="Settings" width="25" height="25">
    </button>
  </div>

  <div class="logo" id="logoBtn">MuseXion</div>

  <div class="nav-right">
    <button class="icon-btn" id="notificationsBtn" title="Notifications">
      <img id="notificationIcon" src="{% static 'images/notification.png' %}" alt="Notifications" width="25" height="25">
    </button>

    <div id="notificationDropdown" class="notification-dropdown hidden">
      <div class="dropdown-header">Notifications</div>
      <div id="notificationList" class="notification-list">
        <p class="loading-notifications">Loading...</p>
      </div>
    </div>

    <button class="icon-btn" id="profileBtn">
      <span id="userFirstName">User</span>
      <img id="userProfilePic" src="{% static 'images/default_pfp.png' %}" alt="Profile picture" width="28" height="28">
    </button>

    <input type="text" class="search" placeholder="Search...">
    <div id="searchSuggestions" class="search-suggestions hidden"></div>

    <button class="icon-btn" id="logoutBtn">Log out</button>
  </div>
</div>

<!-- ‚úÖ SETTINGS DRAWER ‚Äì K√úL√ñN a navbar ut√°n -->
<div id="settingsDrawer" class="settings-drawer hidden">
  <div class="settings-panel">
    <div class="settings-menu">
      <h3>‚öôÔ∏è Settings</h3>
      <ul>
        <li data-section="account" class="active">Account Settings</li>
        <li data-section="export">Download My Data</li>
        <li data-section="theme">Theme Mode</li>
        <li data-section="color">Accent Color</li>
      </ul>
    </div>

    <div class="settings-content">
      <div class="settings-header">
        <button id="closeSettingsBtn" class="close-btn">‚úñ</button>
      </div>

      <div class="settings-section" id="section-account">
        <h4>Account</h4>
        <input type="email" id="newEmailInput" placeholder="New email" />
        <button id="updateEmailBtn">Update Email</button>

        <input type="password" id="oldPasswordInput" placeholder="Old password" />
        <input type="password" id="newPasswordInput" placeholder="New password" />
        <button id="updatePasswordBtn">Update Password</button>

        <button id="deleteAccountBtn" class="danger-btn">Delete Account</button>
      </div>

      <div class="settings-section hidden" id="section-export">
        <h4>Export</h4>
        <button id="exportDataBtn">Download My Data</button>
      </div>

      <div class="settings-section hidden" id="section-theme">
        <h4>Theme Mode</h4>
        <button id="toggleThemeBtn">Toggle Light/Dark</button>
      </div>

      <div class="settings-section hidden" id="section-color">
        <h4>Accent Color</h4>
        <div id="colorThemes">
          <span data-color="orange" class="color-circle selected"></span>
          <span data-color="pink" class="color-circle"></span>
          <span data-color="blue" class="color-circle"></span>
          <span data-color="green" class="color-circle"></span>
        </div>
      </div>

      <div id="settingsMessage" class="settings-msg"></div>
    </div>
  </div>
</div>



  <!-- LAYOUT -->
  <div class="layout">
    <!-- BAL OLDALI S√ÅV -->
    <div class="sidebar">
      <button class="side-btn active" id="forYouBtn">For you</button>
      <button class="side-btn" id="followingBtn">Following</button>
    </div>

    <div class="feed-wrapper">
      <div class="feed-section" id="feed"></div>
    </div>


    <!-- Slide-out Post Panel -->
    <div id="createPostPanel" class="create-post-drawer">
      <div class="create-post">
        <div class="drawer-header">
          <h3>Create a post...</h3>
          <button id="closeDrawerBtn" class="close-drawer-btn" title="Close drawer">‚úñ</button>
        </div>

        <select id="postCategory" required>
          <option value="">-- Choose Category --</option>
        </select>

        <textarea id="postText" placeholder="Write something..."></textarea>
        <div class="preview-files" id="previewFiles"></div> 

        <div class="post-actions">
          <div class="upload-group">
            <label class="upload-btn" title="Upload images">
              <img src="{% static 'images/picture.png' %}" alt="Upload image">
              <input id="postImage" type="file" accept="image/*" multiple>
            </label>
            <label class="upload-btn" title="Upload video">
              <img src="{% static 'images/video.png' %}" alt="Upload video">
              <input id="postVideo" type="file" accept="video/*">
            </label>
          </div>
          <button class="post-btn" id="postBtn">Post</button>
        </div>

        <div id="postError" class="post-error" aria-live="polite"></div>
      </div>

      <div class="butterfly-container">
        <img src="{% static 'images/pillango1.png' %}" alt="Butterfly" width="60">
      </div>
    </div>


      <!-- Slide Trigger Button -->
      <div id="slideTrigger" class="slide-trigger">
        <span>CLICK</span>
        <span>TO</span>
        <span>POST</span>
      </div>

      <!-- üó®Ô∏è COMMENT MODAL -->
    <div id="commentModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn">&times;</span>
        <div class="modal-body">
          <div class="left-artwork-info" id="commentArtworkInfo"></div>
          <div class="right-comments-section">
            <div id="commentsList">Loading comments...</div>
            <div class="comment-input">
              <textarea id="newCommentText" placeholder="Write a comment... (@tag someone)"></textarea>
              <button id="submitComment">Post</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Confirm Modal -->
  <div id="confirmModal" class="modal hidden">
    <div class="modal-content">
      <div id="confirmMessage" class="modal-message"></div>
      <div class="modal-buttons">
        <button id="confirmYes" class="btn-confirm yes">Yes</button>
        <button id="confirmNo" class="btn-confirm no">No</button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container"></div>

  <!-- üñºÔ∏è IMAGE MODAL -->
  <div id="imageModal" class="hidden">
    <div class="modal-controls">
      <a id="downloadImageBtn" download target="_blank" title="Download">
        <img src="{% static 'images/download.png' %}" class="download-icon" alt="Download">
      </a>
      <button id="closeModalBtn" title="Close">
        <img src="{% static 'images/close.png' %}" class="close-modal-icon" alt="Close">
      </button>
    </div>

    <button id="prevImage" class="modal-nav">&#10094;</button>
    <div id="modalContent">
      <img id="modalImage" src="" alt="Artwork Image">
    </div>
    <button id="nextImage" class="modal-nav">&#10095;</button>
  </div>


  <script type="module" src="{% static 'js/posts.js' %}"></script>
  <script type="module" src="{% static 'js/comments.js' %}"></script>
  <script type="module" src="{% static 'js/upload.js' %}"></script>
  <script type="module" src="{% static 'js/image_modal.js' %}"></script>
  <script type="module" src="{% static 'js/main.js' %}"></script>
  <script type="module" src="{% static 'js/notifications.js' %}"></script>
  <script type="module" src="{% static 'js/settings.js' %}"></script>
  <script type="module" src="{% static 'js/themeToggle.js' %}"></script>
  <script type="module" src="{% static 'js/login.js' %}"></script>


<!-- Delete Account Modal (with password input) -->
<div id="deleteAccountModal" class="modal hidden">
  <div class="modal-box dark-box">
    <p class="modal-message">üóëÔ∏è Are you sure you want to permanently delete your MuseXion account?</p>
    
    <input type="password" id="confirm-delete-password" placeholder="Enter your password to confirm" class="input-confirm-password">

    <p id="delete-error" class="error-message" style="display: none;"></p>
    
    <div class="modal-actions">
      <button id="confirmDeleteAccount" class="modal-btn red">Yes, delete</button>
      <button id="cancelDelete" class="modal-btn">Cancel</button>
    </div>
  </div>
</div>



</body>
</html>